<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="netaddiction_stripe_frontend">
            <input type="hidden" name="data_set" t-att-data-action-url="tx_url" data-remove-me=""/>
            <input type='hidden' name='session_id' t-att-value='session_id'/>
            <input type="hidden" name="stripe_key" t-att-value="acquirer.netaddiction_stripe_pk"/>
            <script type="text/javascript">
                odoo.define(function (require) {
                    let ajax = require('web.ajax');
                    ajax.loadJS("https://js.stripe.com/v3/");
                });
            </script>
        </template>

        <template id="netaddiction_stripe_form">
            <input type="hidden" name="data_set" value="/payment/netaddiction-stripe/create-payment-token"/>
            <input type="hidden" name="acquirer_id" t-att-value="id"/>
            <input type="hidden" name="stripe_key" t-att-value="acq.sudo().netaddiction_stripe_pk"/>
            <input type="hidden" name="currency_id" t-att-value="currency_id"/>
            <input t-if="return_url" type="hidden" name="return_url" t-att-value="return_url"/>
            <input t-if="partner_id" type="hidden" name="partner_id" t-att-value="partner_id"/>
            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
            <div id="card-wrapper">
                <div class="d-flex flex-wrap">
                    <div class="col-6 col-md-4 mb-1 px-0 px-md-3">
                        <div class="w-100 mx-auto border p-3 position-relative" style="cursor:pointer; font-size:0.8em; border-radius:6px; max-width:180px; box-shadow:0 4px 8px 0 rgb(156 156 156 / 10%), 0 6px 20px 0 rgb(156 156 156 / 10%); background-color:#3d3d3d; color:#ffffff;">
                            <img class="position-absolute" style="width:20px; top:3px; right:3px;" src="http://localhost:8069/web/image/payment.icon/1/image_payment_form/VISA?unique=7a4f194"/>
                            <input class="position-absolute" style="top:50%; left:10px; transform:translateY(-50%)" type="radio" id="card_1" value="card_1" name="stripe_card" checked="checked"/>
                            <div class="position-absolute" style="background-color:#d8b54c; width:20px; height:15px; top:40%; right:24px; border-radius:3px;"></div>
                            <table>
                                <tbody>
                                    <tr>
                                        <td>**** **** **** 1524</td>
                                    </tr>
                                    <tr>
                                        <td class="text-center"><small>10/24</small></td>
                                    </tr>
                                    <tr>
                                        <td><small>FILIPPONI FABIO</small></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-6 col-md-4 mb-1 px-0 px-md-3">
                        <div class="w-100 mx-auto border p-3 position-relative" style="cursor:pointer; font-size:0.8em; border-radius:6px; max-width:180px; box-shadow:0 4px 8px 0 rgb(156 156 156 / 10%), 0 6px 20px 0 rgb(156 156 156 / 10%); background-color:#3d3d3d; color:#ffffff;">
                            <img class="position-absolute" style="width:20px; top:3px; right:3px;" src="http://localhost:8069/web/image/payment.icon/1/image_payment_form/VISA?unique=7a4f194"/>
                            <input class="position-absolute" style="top:50%; left:10px; transform:translateY(-50%)" type="radio" id="card_2" value="card_2" name="stripe_card"/>
                            <div class="position-absolute" style="background-color:#d8b54c; width:20px; height:15px; top:40%; right:24px; border-radius:3px;"></div>
                            <table>
                                <tbody>
                                    <tr>
                                        <td>**** **** **** 1524</td>
                                    </tr>
                                    <tr>
                                        <td class="text-center"><small>10/24</small></td>
                                    </tr>
                                    <tr>
                                        <td><small>FILIPPONI FABIO</small></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-6 col-md-4 mb-1 px-0 px-md-3">
                        <div class="w-100 mx-auto border p-3 position-relative" style="cursor:pointer; font-size:0.8em; border-radius:6px; max-width:180px; box-shadow:0 4px 8px 0 rgb(156 156 156 / 10%), 0 6px 20px 0 rgb(156 156 156 / 10%); background-color:#3d3d3d; color:#ffffff;">
                            <img class="position-absolute" style="width:20px; top:3px; right:3px;" src="http://localhost:8069/web/image/payment.icon/1/image_payment_form/VISA?unique=7a4f194"/>
                            <input class="position-absolute" style="top:50%; left:10px; transform:translateY(-50%)" type="radio" id="card_3" value="card_3" name="stripe_card"/>
                            <div class="position-absolute" style="background-color:#d8b54c; width:20px; height:15px; top:40%; right:24px; border-radius:3px;"></div>
                            <table>
                                <tbody>
                                    <tr>
                                        <td>**** **** **** 1524</td>
                                    </tr>
                                    <tr>
                                        <td class="text-center"><small>10/24</small></td>
                                    </tr>
                                    <tr>
                                        <td><small>FILIPPONI FABIO</small></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-6 col-md-4 mb-1 px-0 px-md-3">
                        <div class="w-100 mx-auto border p-3 position-relative" style="cursor:pointer; font-size:0.8em; border-radius:6px; max-width:180px; box-shadow:0 4px 8px 0 rgb(156 156 156 / 10%), 0 6px 20px 0 rgb(156 156 156 / 10%); background-color:#3d3d3d; color:#ffffff;">
                            <img class="position-absolute" style="width:20px; top:3px; right:3px;" src="http://localhost:8069/web/image/payment.icon/1/image_payment_form/VISA?unique=7a4f194"/>
                            <input class="position-absolute" style="top:50%; left:10px; transform:translateY(-50%)" type="radio" id="card_4" value="card_4" name="stripe_card"/>
                            <div class="position-absolute" style="background-color:#d8b54c; width:20px; height:15px; top:40%; right:24px; border-radius:3px;"></div>
                            <table>
                                <tbody>
                                    <tr>
                                        <td>**** **** **** 1524</td>
                                    </tr>
                                    <tr>
                                        <td class="text-center"><small>10/24</small></td>
                                    </tr>
                                    <tr>
                                        <td><small>FILIPPONI FABIO</small></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-block text-center mt-3 p-2" id="btn-add-card">
                <i><small style="color:#636262;">- Oppure -</small></i>
            </div>
            <div id="payment-form" class="mt-3 mb-3 p-3 mx-auto col-12 col-md-6" style="background-color:#ffffff; border-radius:6px; box-shadow:0 4px 8px 0 rgb(156 156 156 / 10%), 0 6px 20px 0 rgb(156 156 156 / 10%);">
                <div id="card-element" class="m-3"/>
                <div id="card-errors" class="m-3 text-danger"/>
                <hr/>
                <div class="d-block text-center">
                    <a id="stripeSaveCard" class="btn btn-primary">Salva Carta</a>
                </div>
            </div>
        </template>

        <template id="assets_frontend" inherit_id="web.assets_frontend">
            <xpath expr="script[last()]" position="after">
                <script type="text/javascript" src="/netaddiction_payments/static/js/stripe/form.js"></script>
                <script type="text/javascript" src="/netaddiction_payments/static/js/stripe/processing.js"></script>
            </xpath>
        </template>
    </data>
</odoo>
