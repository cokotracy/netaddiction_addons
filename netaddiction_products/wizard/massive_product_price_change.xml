<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <record id="massive_product_price_change_wizard" model="ir.ui.view">
        <field name="name">massive.product.price.change.wizard</field>
        <field name="model">massive.product.price.change</field>
        <field name="arch" type="xml">
            <form>
                <field name="template_ids" widget="many2many_tags" readonly="1"/>
                <separator string="Pricelist" />
                <field name="pricelist_id" widget="selection" required="1"/>
                <separator string="Products"
                           attrs="{'invisible': [('pricelist_id', '=', False)]}"/>
                <field name="line_ids" nolabel="1" attrs="{'invisible': [('pricelist_id', '=', False)]}">
                    <tree editable="top" delete="0"
                          decoration-danger="to_delete == True"
                          decoration-warning="state == 'change'"
                          decoration-success="state == 'new'"
                          >
                        <field name="product_id"
                               domain="[('product_tmpl_id', 'in', template_ids)]"
                               options="{'no_create': True, 'no_create_edit': True}"/>
                        <field name="sale_price"/>
                        <field name="to_delete" attrs="{'readonly': [('can_be_deleted', '=', False)]}"/>
                        <field name="can_be_deleted" invisible="1"/>
                        <field name="state" invisible="1"/>
                        <field name="item_id" invisible="1"/>
                        <field name="template_ids" invisible="1"/>
                    </tree>
                </field>
                <footer>
                    <button name="apply_price" string="Apply"
                            type="object" class="btn-primary" />
                    <button string="Cancel" class="btn-secondary" special="cancel" />
                </footer>
            </form>
        </field>
    </record>

    <record id="massive_product_price_change_action" model="ir.actions.act_window">
        <field name="name">Massive Change Products Price</field>
        <field name="res_model">massive.product.price.change</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="binding_model_id" ref="product.model_product_template" />
    </record>

</odoo>
