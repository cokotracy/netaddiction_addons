<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data noupdate="1">
        <delete model="ir.ui.menu" id="product.menu_product_template_action" />
        <delete model="ir.ui.menu" id="product.menu_products" />
    </data>

    <data>
    	<!--Crea la funzionalitÃ  ed il gruppo associato-->
        <record model="ir.module.category" id="netaddiction_sale_group">
            <field name="name">Netaddiction Vendite</field>
            <field name="description">Quelli che vendono le cose</field>
            <field name="sequence">80</field>
        </record>

        <record id="netaddiction_sale_user" model="res.groups">
            <field name="name">Utente</field>
            <field name="category_id" ref="netaddiction_sale_group"/>
            <field name="implied_ids" eval="[(4, ref('base.group_user')),(4, ref('netaddiction_products_data_entry_user_base'))]"/>
        </record>

        <record id="netaddiction_sale_user_plus" model="res.groups">
            <field name="name">Utente Plus</field>
            <field name="category_id" ref="netaddiction_sale_group"/>
            <field name="implied_ids" eval="[(4, ref('base.group_user')),(4, ref('netaddiction_products_data_entry_user')),(4 ,ref('netaddiction_sale_user'))]"/>
        </record>

        <!--VENDITE OPZIONALI: AGGIUNGI OPZIONI GESTISCI AFFILIATE, GESTISCI GIFT, GESTISCI PAGAMENTI, GESTISCI OFFERTE-->
        <record model="ir.module.category" id="netaddiction_sale_optional_group">
            <field name="name">Netaddiction Vendite Opzionali</field>
            <field name="description">Roba Opzionale Daje</field>
            <field name="sequence">20</field>
        </record>

        <record id="netaddiction_sale_payments" model="res.groups">
            <field name="name">Gestisci Pagamenti Clienti</field>
            <field name="category_id" ref="netaddiction_sale_optional_group"/>
        </record>
        <record id="netaddiction_sale_gift" model="res.groups">
            <field name="name">Gestisci Gift Clienti</field>
            <field name="category_id" ref="netaddiction_sale_optional_group"/>
        </record>
        <record id="netaddiction_sale_affiliate" model="res.groups">
            <field name="name">Gestisci Affiliati Clienti</field>
            <field name="category_id" ref="netaddiction_sale_optional_group"/>
        </record>
        <record id="netaddiction_sale_offers" model="res.groups">
            <field name="name">Gestisci Offerte</field>
            <field name="category_id" ref="netaddiction_sale_optional_group"/>
        </record>


        <record id="netaddiction_sale_user_manager" model="res.groups">
            <field name="name">Utente Manager</field>
            <field name="category_id" ref="netaddiction_sale_group"/>
            <field name="implied_ids" eval="[(4, ref('base.group_user')),(4, ref('netaddiction_sale_user_plus')),(4, ref('netaddiction_sale_payments')),(4, ref('netaddiction_sale_gift')),(4, ref('netaddiction_sale_affiliate')),(4, ref('netaddiction_sale_offers'))]"/>
        </record>

        <!--MENU-->
        <record id="netaddiction_payments.menu_netaddiction_ccdata" model="ir.ui.menu">
            <field name="groups_id" eval="[(4, ref('netaddiction_sale_payments'))]"/>
        </record>
        <record id="netaddiction_payments.menu_netaddiction_sales_Positivity_executor" model="ir.ui.menu">
            <field name="groups_id" eval="[(4, ref('netaddiction_sale_payments'))]"/>
        </record>

        <record id="netaddiction_customer.menu_netaddiction_sales_gift" model="ir.ui.menu">
            <field name="groups_id" eval="[(4, ref('netaddiction_sale_gift'))]"/>
        </record>

        <record id="netaddiction_customer.menu_netaddiction_sales_affiliate" model="ir.ui.menu">
            <field name="groups_id" eval="[(4, ref('netaddiction_sale_affiliate'))]"/>
        </record>


        <record id="base.menu_base_partner" model="ir.ui.menu">
            <field name="groups_id" eval="[(4, ref('netaddiction_sale_user'))]"/>
        </record>
        <record id="base.menu_partner_form" model="ir.ui.menu">
            <field name="groups_id" eval="[(4, ref('netaddiction_sale_user'))]"/>
        </record>
        <record id="base.menu_sales" model="ir.ui.menu">
            <field name="groups_id" eval="[(4, ref('netaddiction_sale_user'))]"/>
        </record>
        <record id="sale.menu_sale_order" model="ir.ui.menu">
            <field name="groups_id" eval="[(4, ref('netaddiction_sale_user'))]"/>
        </record>


        <record id="sales_team.menu_sales_team_act" model="ir.ui.menu">
            <field name="groups_id" eval="[(4, ref('base.group_sale_manager'))]"/>
        </record>

        <record id="netaddiction_expressions.menu_netaddiction_offers" model="ir.ui.menu">
            <field name="groups_id" eval="[(4, ref('netaddiction_sale_offers'))]"/>
        </record>

        <record id="base.menu_sale_report" model="ir.ui.menu">
            <field name="groups_id" eval="[(4, ref('netaddiction_sale_user_manager'))]"/>
        </record>

        <menuitem id="sale.menu_sale_invoicing" parent="account.menu_finance"/>

        <!--VISTE-->
         <record id="purchase.res_partner_view_purchase_buttons" model="ir.ui.view">
            <field name="groups_id" eval="[(4, ref('netaddiction_purchase_user'))]"/>
        </record>

        <record id="account.view_partner_property_form" model="ir.ui.view">
            <field name="groups_id" eval="[(4, ref('netaddiction_purchase_user')), (4, ref('netaddiction_sale_user'))]"/>
        </record>
        <record id="netaddiction_customer.netaddiction_view_customer_affiliate" model="ir.ui.view">
            <field name="groups_id" eval="[(4, ref('netaddiction_sale_affiliate'))]"/>
        </record>
        <record id="netaddiction_customer.netaddiction_view_customer_new_gift" model="ir.ui.view">
            <field name="groups_id" eval="[(4, ref('netaddiction_sale_gift'))]"/>
        </record>

        <record id="netaddiction_payments.netaddiction_view_customer_ccdata" model="ir.ui.view">
            <field name="groups_id" eval="[(4, ref('netaddiction_sale_payments'))]"/>
        </record>


        <!--ACL PER SALE USER-->
        <record id="netaddiction_sale_user_acces_orders" model="ir.model.access">
            <field name="name">Ordine Vendite</field>
            <field name="model_id" search="[('model','=','sale.order')]" model="ir.model"/>
            <field name="group_id" ref="netaddiction_sale_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
        </record>
        <record id="netaddiction_sale_user_acces_order_contribution" model="ir.model.access">
            <field name="name">Ordine Contributi</field>
            <field name="model_id" search="[('model','=','netaddiction.order.contribution')]" model="ir.model"/>
            <field name="group_id" ref="netaddiction_sale_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
        </record>
        <record id="netaddiction_sale_user_acces_contribution" model="ir.model.access">
            <field name="name">Contributi</field>
            <field name="model_id" search="[('model','=','netaddiction.contribution')]" model="ir.model"/>
            <field name="group_id" ref="netaddiction_sale_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
        </record>
        <record id="netaddiction_sale_user_acces_warehouse_operation_settings" model="ir.model.access">
            <field name="name">Warehouse operations settings</field>
            <field name="model_id" search="[('model','=','netaddiction.warehouse.operations.settings')]" model="ir.model"/>
            <field name="group_id" ref="netaddiction_sale_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
        </record>
        <record id="netaddiction_sale_user_acces_vaucher_history" model="ir.model.access">
            <field name="name">netaddiction.order.specialoffer.vaucher.history</field>
            <field name="model_id" search="[('model','=','netaddiction.order.specialoffer.vaucher.history')]" model="ir.model"/>
            <field name="group_id" ref="netaddiction_sale_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
        </record>
        <record id="netaddiction_sale_user_acces_account_payment" model="ir.model.access">
            <field name="name">account payment</field>
            <field name="model_id" search="[('model','=','account.payment')]" model="ir.model"/>
            <field name="group_id" ref="netaddiction_sale_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
        </record>
        <record id="netaddiction_sale_user_acces_cart_history" model="ir.model.access">
            <field name="name">cart history</field>
            <field name="model_id" search="[('model','=','netaddiction.order.specialoffer.cart.history')]" model="ir.model"/>
            <field name="group_id" ref="netaddiction_sale_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
        </record>
        <record id="netaddiction_sale_user_acces_digital_code" model="ir.model.access">
            <field name="name">Digital Code</field>
            <field name="model_id" search="[('model','=','netaddiction.specialoffer.digital_code')]" model="ir.model"/>
            <field name="group_id" ref="netaddiction_sale_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
        </record>
        <record id="netaddiction_sale_user_acces_project_issue" model="ir.model.access">
            <field name="name">project.issue</field>
            <field name="model_id" search="[('model','=','project.issue')]" model="ir.model"/>
            <field name="group_id" ref="netaddiction_sale_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
        </record>
        <record id="netaddiction_sale_user_acces_account_invoice" model="ir.model.access">
            <field name="name">account invoice</field>
            <field name="model_id" search="[('model','=','account.invoice')]" model="ir.model"/>
            <field name="group_id" ref="netaddiction_sale_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
        </record>

        <!--<record id="netaddiction_sale_user_acces_affiliate" model="ir.model.access">
            <field name="name">Affiliate</field>
            <field name="model_id" search="[('model','=','netaddiction.partner.affiliate')]" model="ir.model"/>
            <field name="group_id" ref="netaddiction_sale_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
        </record>
        <record id="netaddiction_sale_user_acces_affiliate_commission" model="ir.model.access">
            <field name="name">Affiliate Commission</field>
            <field name="model_id" search="[('model','=','netaddiction.partner.affiliate.commission')]" model="ir.model"/>
            <field name="group_id" ref="netaddiction_sale_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
        </record>
        <record id="netaddiction_sale_user_acces_affiliate_order_hist" model="ir.model.access">
            <field name="name">Affiliate Order History</field>
            <field name="model_id" search="[('model','=','netaddiction.partner.affiliate.order.history')]" model="ir.model"/>
            <field name="group_id" ref="netaddiction_sale_user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
        </record>-->

        <!--RULE-->
        <record model="ir.rule" id="netaddiction_only_customer">
            <field name="name">Solo Clienti</field>
            <field name="model_id" search="[('model','=','res.partner')]" model="ir.model"/>
            <field name="groups" eval="[(4, ref('netaddiction_sale_user'))]"/>
            <field name="domain_force">['|','|',('company_id','=',False),('company_id','child_of',[user.company_id.id]),('user_ids','in',[user.id]),('customer','=',True)]</field>
        </record>
    </data>
</openerp>