<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="assets_frontend" inherit_id="website_sale.assets_frontend">
        <xpath expr="script[last()]" position="after">
            <script type="text/javascript" src="/website_stock_notify/static/src/js/website_sale_notify.js"></script>
        </xpath>
    </template>

    <template id="website_stock_notify_button" name='stock product notification' inherit_id="website_sale.product" priority="8">
        <xpath expr="//a[@id='add_to_cart']" position="after">
            <t t-if="product.type == 'product' and product.inventory_availability in ('always', 'threshold')">
                <div class="o_product_notify" style="margin: 10px 0px 30px 0px;" t-if="not cart_qty and not product.virtual_available > 0">
                    <div t-attf-class="input-group #{_classes}" style="margin-top: 10px;">
                        <input type="email" id="email" class="form-control" placeholder="Inserisci la tua email" t-att-value="user_id.email" />
                        <div class="input-group-append">
                            <button type="submit" class="btn btn-primary submit-notify">Avvisami</button>
                        </div>
                    </div>
                    <div class="o_notify_message alert alert-info d-none" style="margin-top: 10px;"></div>
                    <div class="o_notify_alert_message alert alert-warning d-none" style="margin-top: 10px;"></div>
                </div>
            </t>
        </xpath>
    </template>

</odoo>
